import os
from app import create_app

# 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# –°—á–∏—Ç—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é FLASK_ENV (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'development' –∏–ª–∏ 'production')
# –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º 'development' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
config_name = os.getenv('FLASK_ENV', 'development')

# 2. –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
app = create_app(config_name)

if __name__ == '__main__':
    # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Ä—Ç –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º 5000
    port = int(os.environ.get('PORT', 5000))
    
    # –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
    print("\n" + "="*70)
    print(f"üöÄ –ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê ({config_name.upper()})")
    print("="*70)
    print(f"üìç –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞: http://localhost:{port}")
    print(f"üìä API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞:   http://localhost:{port}/api")
    print("="*70)
    
    # 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
    # debug=True –≤–∫–ª—é—á–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ config_name == 'development'
    # (—Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ –≤ —Ç–≤–æ–µ–º config.py), –Ω–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∏ —è–≤–Ω–æ.
    app.run(
        host='0.0.0.0',
        port=port
    )